<app-layout [data]="brandingDetails.layout">
  <div class="signup-card">
    <h2>{{brandingDetails.mainTitle}}</h2>

    @if (loading) {
      <div *ngIf="loading" class="loading-msg">
        {{brandingDetails.loading}}
      </div>
    }@else {
      @if(errorMessage){
        <p class="error-msg">{{ errorMessage }}</p>
      }
      @if(successMessage) {
        <p class="success-msg">{{ successMessage }}</p>
      }
 
      <!-- Signup Form -->
      <div>
        <form (ngSubmit)="signup()" [formGroup]="signupForm">
          
          <div class="form-group">
            <label>Username</label>
            <input 
              type="text" 
              id="username"
              name="username" 
              required 
              minlength="3"
              placeholder="Enter your username"
              formControlName = "username" 
            />
            @if(signupForm.get('username')?.invalid && signupForm.get('username')?.touched){
            <small >
              {{brandingDetails.errorMessages.username}}
            </small>
          }
          </div>

          <div class="form-group">
            <label>Email</label>
            <input 
              type="email" 
              id="email"
              name="email" 
              formControlName="email"
              placeholder="Enter your email" 
            />
            @if(signupForm.get('email')?.invalid && signupForm.get('email')?.touched){
            <small>
              {{brandingDetails.errorMessages.email}}
            </small>
          }
          </div>

          <div class="form-group">
            <label>Password</label>
            <input 
              type="password" 
              id="password"
              name="password" 
              formControlName="password"
              minlength="6"
              placeholder="••••••••••" 
            />
            @if(signupForm.get('password')?.invalid && signupForm.get('password')?.touched){
              <small>
              {{brandingDetails.errorMessages.password}}
            </small>
            }
            
          </div>

          <button type="submit" [disabled]="!signupForm.valid || loading">
            {{ loading ? 'Creating Account...' : 'Sign Up' }}
          </button>
        </form>

        <button class="back-to-login-btn" (click)="navigateToLogin()">
          {{brandingDetails.formButtons.login}}
        </button>

      </div>
    }

  </div>
</app-layout>